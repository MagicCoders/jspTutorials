<html>
                <head>
                <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
                <title>031 FAQ Session Tracking - How does the TO DO LIST demo work</title>
                </head>
                <body>
                <div class="container">
                <div class="row">
                <div class="col-md-10 col-md-offset-1">
                    <p class="lead"><p><strong>FAQ: Session Tracking - How Does the TO DO LIST demo work?</strong></p>

<p>I'll explain the code in detail. :-)</p>















<p>Here's the full code ... and then after the full code, I'll explain each section in detail.</p>

















<p>---</p>

















<p>Full code:</p>

















<p>&lt;%@ page import="java.util.*" %&gt;</p>

















<p>&lt;html&gt;</p>

















<p>&lt;body&gt;</p>

















<p><strong>&lt;!-- Step 1: Create HTML form --&gt;<br></strong>&lt;form action="todo-demo.jsp"&gt;<br>    Add new item: &lt;input type="text" name="theItem" /&gt;<br>    <br>    &lt;input type="submit" value="Submit" /&gt;<br>&lt;/form&gt;</p>

















<p><strong>&lt;!-- Step 2: Add new item to "To Do" list --&gt;<br></strong>&lt;%<br>    // get the TO DO items from the session<br>    List&lt;String&gt; items = (List&lt;String&gt;) session.getAttribute("myToDoList");</p>

















<p>    // if the TO DO items doesn't exist, then create a new one<br>    if (items == null) {<br>        items = new ArrayList&lt;String&gt;();<br>        session.setAttribute("myToDoList", items);<br>    }<br>    <br>    // see if there is form data to add<br>    String theItem = request.getParameter("theItem");<br>    if (theItem != null) {<br>        items.add(theItem);<br>    }<br>%&gt;</p>

















<p><strong>&lt;!-- Step 3: Display all "To Do" item from session --&gt;<br></strong>&lt;hr&gt;<br>&lt;b&gt;To List Items:&lt;/b&gt; &lt;br/&gt;</p>

















<p>&lt;ol&gt;<br>&lt;%<br>    for (String temp : items) {<br>        out.println("&lt;li&gt;" + temp + "&lt;/li&gt;");<br>    }<br>%&gt;<br>&lt;/ol&gt;</p>

















<p>&lt;/body&gt;</p>

















<p>&lt;/html&gt;</p>

















<p>----</p>

















<p>Now let's explain each section in detail</p>

















<p><code>&lt;%@ page import="java.util.*" %&gt; </code> </p>

















<p>This code performs an import of the package java.util. We make use of the List and ArrayList from this package.</p>

















<p>--</p>

















<pre class="prettyprint linenums">    &lt;html&gt;
    &lt;body&gt;</pre>































<p>basic HTML set up code</p>

















<p>---</p>

















<p>  <strong>  &lt;!-- Step 1: Create HTML form --&gt;</strong><br></p>











<pre class="prettyprint linenums">    &lt;form action="todo-demo.jsp"&gt;
        Add new item: &lt;input type="text" name="theItem" /&gt;
        
        &lt;input type="submit" value="Submit" /&gt;
    &lt;/form&gt;</pre>





























<p>This code creates an HTML form. The action will point back to the same JSP. So effectively, we are submitting form data back to ourselves. This form will read a text input from the user. The field is named "theItem". We'll read this field later to add it to your list. The form also includes a submit button.</p>

















<p>---</p>

















<p>This is a big section, so let's break down in detail even further.</p>

















<p>At a high-level, we are going to add a new item to our to do list.</p>

















<p>The high-level steps include</p>

















<p>1. Get the TO DO items from the session</p>

















<p>2. If the TO DO items doesn't exist in the session, then create a new list and add it to the session</p>

















<p>3. Check to see if there is any form data to add.</p>

















<p>Okay, let's break it down in detail with code examples.</p>

















<p>----</p>

















<p><strong>    &lt;!-- Step 2: Add new item to "To Do" list --&gt;</strong><br></p>









<pre class="prettyprint linenums">    &lt;%
        // get the TO DO items from the session
        List&lt;String&gt; items = (List&lt;String&gt;) session.getAttribute("myToDoList");</pre>



























<p>This section of code access the JSP session object. The session object is unique for each web user. We attempt to get the TO DO items from the session. We make use of the attribute name "myToDoList". This is basically the key/label to look up data from the session.</p>

















<p>The session.getAttribute method will always return something of type java.lang.Object. We downcast this to List&lt;String&gt; because we are making use of strings to keep track of our to do items.</p>

















<p>This is assigned to the variable "items". This variable holds an object reference to the data that we retrieved from the session object. We can use this variable later in the program to add items and also display items.</p>

















<p>----</p>

















<p><strong>        // if the TO DO items doesn't exist, then create a new one</strong><br></p>







<pre class="prettyprint linenums">        if (items == null) {
            items = new ArrayList&lt;String&gt;();
            session.setAttribute("myToDoList", items);
        }</pre>

























<p>This section of code checks to see if the TO DO items doesn't exist. If checks the variable "items" to see if it is null. If "items" is null then that means the TO DO items do not exist. Think of this as like a shopping cart .... your cart doesn't exist.</p>

















<p>As a result, we need to create a new list and assign to items.</p>

















<p>Then we place the items in the session. We make use of the name, value pair.  The attribute name is "myToDoList" and the object is the "items" variable.</p>

















<p>---</p>

















<p>        <br><strong>        // see if there is form data to add</strong><br></p>





<pre class="prettyprint linenums">        String theItem = request.getParameter("theItem");
        if (theItem != null) {
            items.add(theItem);
        }
    %&gt;</pre>























<p>This section of code checks to see if there is form data to add. It reads the form data with the request.getParameter("theItem").  This is assigned to a variable. If the theItem variable is not null, then that means the user entered some data. Then we add theItem to our "items" array list. </p>

















<p>Since we're using object references, remember that "items" is a variable that holds a reference to an object. Then it points to the same area of memory that is used by the session. So in effect, the users's session has now been updated with this new entry.</p>

















<p>---</p>

















<p><strong>    &lt;!-- Step 3: Display all "To Do" item from session --&gt;<br></strong></p>



<pre class="prettyprint linenums">    &lt;hr&gt;
    &lt;b&gt;To List Items:&lt;/b&gt; &lt;br/&gt;
    &lt;ol&gt;
    &lt;%
        for (String temp : items) {
            out.println("&lt;li&gt;" + temp + "&lt;/li&gt;");
        }
    %&gt;
    &lt;/ol&gt;</pre>





















<p>This section of code displays all of the "To Do" items from the session.</p>

















<p>We make use of our variable "items" because it is our object reference to the data.</p>

















<p>We use the "items" variable in the for loop to display the contents of each string in our array list.</p>

















<p>To display data, we make use of "out.println".</p>

















<p>---</p>

















<pre class="prettyprint linenums">    &lt;/body&gt;
    &lt;/html&gt;</pre>



















<p>This code just wraps up the HTML page.</p>

















<p>====</p>

















<p>Let me know if this explanation helped.</p>

















<p>If you have more questions, let me know and we can drill down even further.</p>

















<p>:-)</p></p>
                </div>
                </div>
                </div>
                <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
                </body>
                </html>